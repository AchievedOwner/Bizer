@namespace Bizer.AspNetCore.Components
@inherits MenuComponentBase
<ul class="@Class" style="height:100vh;overflow-y:hidden" id="sidemenu">
    @foreach (var item in SideMenus)
    {
        if (item.Items.Any())
        {
            <NavItem>
                <NavLink class="nav-link text-reset" href="javascript:;" @onclick="@(e=>RefCollapse.Toggle())">
                    <MenuTitle Item="item" />
                    &nbsp;
                        <Icon Name="@(RefCollapse.Expaned?"chevron-down":"chevron-up")" />
                </NavLink>
            </NavItem>
            <Collapse @ref="RefCollapse">
                <ul class="nav flex-column ms-4">
                    @foreach (var sub in item.Items)
                    {
                        <NavItem>
                            <NavLink class="nav-link text-reset" href="@sub.Link">
                                <MenuTitle Item="sub" />
                            </NavLink>
                        </NavItem>
                    }
                </ul>
            </Collapse>
        }
        else
        {
            <NavItem>
                <NavLink Match="NavLinkMatch.All" class="nav-link text-reset" href="@item.Link">
                    <MenuTitle Item="item" />
                </NavLink>
            </NavItem>
        }

    }
</ul>

@code {
    Collapse? RefCollapse;
    string? Class => HtmlHelper.Instance.Class()
                                .Append("nav nav-pills")
                                .Append("flex-column")
                                .Append(Options.Theme.MenuColor.GetCssClass("bg-"))
                                .Append("text-light", Options.Theme.MenuColor.IsDark())
                                .ToString();
}