@namespace Bizer.AspNetCore.Components
@inherits MenuComponentBase
<ul class="@Class" style="height:100vh;overflow-y:hidden">
    @foreach (var item in SideMenus)
    {
        if (item.Items.Any())
        {
            <NavItem>
                <NavAnchor Link="javascript:;" AdditionalClass="text-reset" @onclick="@(e=>RefCollapse.Toggle())">
                    <MenuTitle Item="item" />
                    &nbsp;
                        <Icon Name="@(RefCollapse.Expaned?"chevron-down":"chevron-up")" />
                </NavAnchor>
            </NavItem>
            <Collapse @ref="RefCollapse">
                <ul class="nav flex-column ms-4">
                    @foreach (var sub in item.Items)
                    {
                        <NavItem>
                            <NavAnchor Link="@sub.Link" AdditionalClass="text-reset">
                                <MenuTitle Item="sub" />
                            </NavAnchor>
                        </NavItem>
                    }
                </ul>
            </Collapse>
        }
        else
        {
            <NavItem>
                <NavAnchor Link="@item.Link" AdditionalClass="text-reset">
                    <MenuTitle Item="item" />
                </NavAnchor>
            </NavItem>
        }

    }
</ul>

@code {
    Collapse? RefCollapse;
    string? Class => HtmlHelper.Instance.Class()
                                .Append("nav")
                                .Append("flex-column")
                                .Append(Options.Theme.MenuColor.GetCssClass("bg-"))
                                .Append("text-light", Options.Theme.MenuColor.IsDark())
                                .ToString();
}